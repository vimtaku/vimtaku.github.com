
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>vimtaku blog</title>
	<meta name="author" content="vimtaku">

	
	<meta name="description" content="現象
iam_profile を使うことで、 aws_access_key や aws_access_secret を具体的に指定しなくても、
metadata な endpoint にアクセスして一時的な access_key と secret を取得できるようになっている( &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="vimtaku blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="http://vimtakublog.qolwu.com/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">vimtaku blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:vimtaku.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/vimtaku" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/vimtaku" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:vimtaku.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/21/fog-iam-profile/">
		
			Fog っていう Gem で Use_iam_profile があんまうまく行かない件</a>
	</h2>
	<div class="entry-content">
		
<h2 id="section">現象</h2>
<p>iam_profile を使うことで、 aws_access_key や aws_access_secret を具体的に指定しなくても、<br />
metadata な endpoint にアクセスして一時的な access_key と secret を取得できるようになっている(できたのは割と最近らしい)。<br />
それなら、iam を使いたいわけなんだけど、 fog v1.18.0 と v1.19.0 で試しても use_iam_profile がうまくいかない。  </p>

<p>呼び出しているクライアントライブラリは asset_sync v1.0.0 と elasticsearch v0.3.4 。<br />
どちらも aws_credential fetcher で credential を取得してるみたいだけど、それを使ってないようにみえた。  </p>

<h2 id="section-1">対処</h2>
<p>全部読んでないからわからないけど、俺の予想が合っていれば<br />
credential を撮ってきたものを使用していないので ここが怪しかった。  </p>

<p>lib/fog/core/service.rb</p>
<div>
  <pre><code class="bash">-options = options.merge(fetch_credentials(options))
+options = fetch_credentials(options).merge(options)</code></pre>
</div>

<p>とりあえずもっと調べなきゃよくわからない。<br />
これがうまくいっていそうなら pull req だしてみよう。  </p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-21T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/aws/'>aws</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/20/cloud-watch-alarm/">
		
			Chef で Opsworks のインスタンス起動時に Cloudwatch の Alarm を作成するためにしたこと</a>
	</h2>
	<div class="entry-content">
		
<h2 id="toc">TOC</h2>
<ul id="markdown-toc">
  <li><a href="#toc">TOC</a></li>
  <li><a href="#section">大まかな流れ</a></li>
  <li><a href="#iam-">1. IAM の設定</a></li>
  <li><a href="#sns-">2. SNS のトピックの作成</a></li>
  <li><a href="#cloud-watch--api--cli-">3. cloud watch の API を cli から叩いてみる</a>    <ul>
      <li><a href="#from-cli">メトリックの作成 from cli</a></li>
    </ul>
  </li>
  <li><a href="#cloud-watch-">4. cloud watch での作成確認</a></li>
  <li><a href="#chef-recipe-">5. chef recipe を書く</a></li>
  <li><a href="#opsworks--setup-">6. opsworks のレイヤー設定で、 setup ライフサイクルイベントで設定</a>    <ul>
      <li><a href="#section-1">おまけ</a>        <ul>
          <li><a href="#section-2">気をつけること要点</a></li>
          <li><a href="#section-3">標準出力から入力をし続けるからメモリに確保し続けるコマンド</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="section">大まかな流れ</h2>
<ol>
  <li>IAM の設定</li>
  <li>SNS のトピックの作成(メール送る用)</li>
  <li>cloud watch の API を cli から叩いてみる</li>
  <li>cloud watch の手動確認</li>
  <li>chef recipe を書く</li>
  <li>opsworks のレイヤー設定で、 setup ライフサイクルイベントで設定</li>
</ol>

<p>ではさっそく。  </p>

<h2 id="iam-">1. IAM の設定</h2>
<p>opsworks ではインスタンス生成時に デフォルトで Default IAM instance profile を設定できる。<br />
ここの IAM Role に権限がないと、 aws cli から操作ができないので注意する。
この記事では、IAMの設定については詳細に明記しない。  </p>

<h2 id="sns-">2. SNS のトピックの作成</h2>
<p>コマンドラインか AWS Console から、メール送る用に トピックを作成する。<br />
監視しているインスタンスの異常時にメールを受け取るため。<br />
CLI ではこちらが参考になる。<br />
<a href="http://exploreaws.doorblog.jp/archives/24701093.html">http://exploreaws.doorblog.jp/archives/24701093.html</a><br />
サブスクリプションを許可しておくと後々のチェックで捗る。<br />
ちなみにこれは、あとで alarm-actions に指定する。  </p>

<p>ここではできた topic が、仮に arn:aws:sns:ap-northeast-1:99999999:mogemoga としておく。  </p>

<h2 id="cloud-watch--api--cli-">3. cloud watch の API を cli から叩いてみる</h2>

<h3 id="from-cli">メトリックの作成 from cli</h3>

<div>
  <pre><code class="bash">aws cloudwatch put-metric-alarm
--alarm-name='disk-usage' \
             --alarm-description 'Disk usage alert' \
             --alarm-actions='arn:aws:sns:ap-northeast-1:99999999:mogemoga'   \
             --namespace  'System/Linux'  \
             --metric-name  'DiskSpaceUtilization'   \
             --dimensions='[{&quot;Name&quot;: &quot;InstanceId&quot;,&quot;Value&quot;: &quot;i-deadbeaf&quot;},{&quot;Name&quot;:&quot;Filesystem&quot;,&quot;Value&quot;: &quot;/dev/xvda1&quot;},{&quot;Name&quot;:&quot;MountPath&quot;,&quot;Value&quot;:&quot;/&quot;}]' \
             --statistic  'Average' \
             --period  '300'   \
             --unit 'Percent'
             --threshold  '50'
             --evaluation-periods  '1'
             --region 'ap-northeast-1'
             --comparison-operator 'GreaterThanOrEqualToThreshold'</code></pre>
</div>

<p>ここですんなりうまくいくかどうかが別れると思う。<br />
IAM role を使う場合は、権限が許可されていれば問題なく通ると思う。<br />
権限がない場合は、 cli の credential 設定が必要になるかもしれない。<br />
<a href="http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html">http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html</a>  </p>

<h2 id="cloud-watch-">4. cloud watch での作成確認</h2>
<p>上記のコマンドで成功していれば AWS Console から cloud watch のアラームができているはずなので確認する。  </p>

<h2 id="chef-recipe-">5. chef recipe を書く</h2>

<p>あとは、上記 3 を実行する chef のレシピを書いて、 opsworks が取ってくる custom chef recipe のレポジトリに配置すればおｋ．<br />
今回は load average もとりたかったので、<br />
<a href="http://aws.amazon.com/code/8720044071969977">http://aws.amazon.com/code/8720044071969977</a><br />
のスクリプトを改変して使用することにした。<br />
ソースはこちら -&gt; <a href="https://github.com/FumihikoSHIROYAMA/cloud_watch_script.git">https://github.com/FumihikoSHIROYAMA/cloud_watch_script.git</a><br />
disk space をとったりすることができる pl なのですごく便利。  </p>

<p>下記の repository は crontab に 上記の pl (load average は別) のものを登録するものだ。<br />
<a href="https://github.com/alexism/cloudwatch_monitoring">https://github.com/alexism/cloudwatch_monitoring</a>  </p>

<p>これをフォークして、 load average とれる cron を作る機能と、 アラーム登録する奴を書いた。<br />
<a href="https://github.com/vimtaku/cloudwatch_monitoring.git">https://github.com/vimtaku/cloudwatch_monitoring.git</a><br />
chef 力低めで申し訳なので、アドバイス、pull req など大歓迎。  </p>

<h2 id="opsworks--setup-">6. opsworks のレイヤー設定で、 setup ライフサイクルイベントで設定</h2>
<p>これはもう、 opsworks に慣れているひとなら問題無いと思う。<br />
5 で作ったものがうまくいっていれば(というか試すときに deploy かどっかで試すと思うんだけど)<br />
それを setup に移動してやるだけだ。  </p>

<h3 id="section-1">おまけ</h3>

<h4 id="section-2">気をつけること要点</h4>
<ul>
  <li>IAM Role に権限がない場合があるので気をつける
    <ul>
      <li>参考
        <ul>
          <li><a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/UsingIAM.html">http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/UsingIAM.html</a></li>
          <li><a href="http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-CreateVolume.html">http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-CreateVolume.html</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>opsworks では chef の data_bags が使えないのを頭に入れておく
    <ul>
      <li>自分はあとから気づいたパターン
        <ul>
          <li>詳細は <a href="http://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-chef11.html">http://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-chef11.html</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>mon-put-metric-alarm の代わりに aws cloudwatch put-metric-aaerm を使用する
    <ul>
      <li>role の設定ができていても credential エラーとかいっぱい言われるため。</li>
    </ul>
  </li>
  <li>alert と alarm が似ているので alerm ってタイポに気をつける</li>
</ul>

<h4 id="section-3">標準出力から入力をし続けるからメモリに確保し続けるコマンド</h4>
<div>
  <pre><code class="bash">/dev/null &lt; $(yes)
cat - &lt; $(yes)</code></pre>
</div>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-20T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/aws/'>aws</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/19/jisui-best-practice/">
		
			俺なりの自炊セットをそろえた</a>
	</h2>
	<div class="entry-content">
		
<h2 id="section">背景</h2>
<p>覚悟を決めたので自炊セットを買うことにした。<br />
電子書籍は最近出てくることが多くなったとはいえ、<br />
すべてが電子書籍で販売されている訳ではないからだ。<br />
Nexus7 を存分に生かすために買った自炊セットの<br />
俺なりのベストプラクティスをここに記載する。  </p>

<p>とはいえ、家にある本の数は100冊程度なので、<br />
もしかしたら裁断サービスのほうが安く上がるかもしれないが<br />
安値で自炊セットをそろえれば、家の雑多な書類とかも処理できるし<br />
楽なのでそろえることにした。  </p>

<p>とにかく安くそろえることを前提とした。</p>

<h2 id="section-1">俺なりの結論</h2>
<ul>
  <li>スキャナ
    <ul>
      <li>image FORMULA DR-C125</li>
    </ul>
  </li>
  <li>裁断機
    <ul>
      <li>カール事務器 ディスクカッターA4サイズ対応 丸刃40枚裁断(2往復) ブラック DC-210N</li>
    </ul>
  </li>
</ul>

<p>計、約3万円也。。</p>

<h2 id="section-2">スキャナの選定</h2>
<p>スキャナは実際すごくまよったが、とにかく安くそろえたかったので、<br />
ScanSnap1500 の中古か image FORMULA DR-C125 にしようと思っていた。<br />
結構比較記事があるので、ググってもらえばわかると思うけど、<br />
SS1500は重送とかが結構おこるといわれていたのと、Amazon のレビューの評判が<br />
そこそこよさげだったので、 image FORMULA DR-C125 にした。<br />
安さの観点から、比較対象として SS1300 とか、ハンディスキャナとかがあったけど<br />
SS1500 とのスキャンスピード比較動画が結構えげつない差だったので SS1300 はやめた。<br />
ちなみに、 SS1500 よりも DR-C125 のほうが早い感じらしい。<br />
ScanSnap1500 マジ良いみたいな話で、実際に使ったこと無いから比較できないけど、<br />
DR-C125 はとても良いものだった。ちなみにヤフオクで 約2万円で中古を買った。<br />
なんていうか、Mac 用のドライバを普通にインストールして、<br />
すぐにスキャンできた。OCR も効いている。<br />
新品も Amazon で2.7万くらいなので、新品でも良いかもしれない。<br />
アフィは張らない。  </p>

<h2 id="section-3">裁断機の選定</h2>
<p>ローラーカッター(1000円)とカッターマット、定規で行けるかと思っていたんだけど、<br />
分厚い本とか、マジ無理です。絶対無理。<br />
いや、無理ではない、正確には。<br />
でも、自炊とか効率的なことを考える人がやることではない。<br />
カッターでもいい人は、新書とかばかりのひと。<br />
それなら余裕。技術書はたぶん相当に厳しい。<br />
なので、ちょうど今さっき、評判が割と良い DC-210N の裁断機を買った。<br />
約1万円也。<br />
どうなるかわからないが、絶対手動よりはマシだと思う。<br />
それくらい、非現実的だと思う。行けると思っていた俺浅はか。  </p>

<h2 id="section-4">あとは読むだけ</h2>
<p>自炊しっぱなしで読まないみたいなのがありそうだけど、必ず読むよ。<br />
学習し続けることは、尊い。<br />
たゆまぬ努力を続けよう。</p>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-19T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/zi-chui/'>自炊</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/14/asset-sync/">
		
			Asset_sync</a>
	</h2>
	<div class="entry-content">
		
<h2 id="rails--asset-pipeline--s3-opsworks">rails で asset pipeline を使って s3 に上げる手順について(opsworks使用)</h2>

<h2 id="url">参考URL</h2>
<p>こちらを参考にした。
<a href="http://d.hatena.ne.jp/lettas0726/20130320/1363773153">http://d.hatena.ne.jp/lettas0726/20130320/1363773153</a></p>

<h4 id="gemfile">Gemfile</h4>
<div>
  <pre><code class="ruby">gem 'uglifier', '&gt;= 1.3.0'
gem 'asset_sync'</code></pre>
</div>

<p>を追記。</p>

<h4 id="deploybeforemigraterb">deploy/before_migrate.rb</h4>

<div>
  <pre><code class="ruby">template &quot;#{release_path}/config/asset_sync.yml&quot; do
  mode &quot;0644&quot;
  source &quot;asset_sync.yml.erb&quot;
end

bash &quot;precompile_assets&quot; do
  user &quot;deploy&quot;
  cwd release_path
  code 'bundle exec rake assets:precompile RAILS_ENV=production'
end</code></pre>
</div>

<p>今回は、 before_migrate で呼ぶことにする。<br />
chef-solo で呼ばれるので resource が使える模様。<br />
カスタム chef リポジトリに asset_sync.yml の template を用意しておく。<br />
template は asset_sync.yml.erb としておいておく感じ。</p>

<h4 id="configenvironmentsproductionrb">config/environments/production.rb</h4>
<p>hoge.example.com のバケットとしたとき、以下のように追記。</p>

<div>
  <pre><code class="ruby">config.action_controller.asset_host = '//s3-ap-northeast-1.amazonaws.com/hoge.example.com'
config.assets.initialize_on_precompile = true</code></pre>
</div>

<h2 id="existingremotefiles-">existing_remote_files オプションについて</h2>
<p>アセットパイプラインでは、ファイルにおそらく md5 の hash 値がついているのを生成する。<br />
ここで複数の rails インスタンスが非同期(もしくは片方のみ)なので<br />
existing_remote_files: ‘delete’ として<br />
precompile を実行するともともと参照していたファイルが消えてしまうので、<br />
config/asset_sync.yml の中の existing_remote_files を keep にする。<br />
(しかし、ゴミはのこる。対処については要検討。  </p>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-14T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/chef/'>chef</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/13/yomu-kintore-memo/">
		
			読む筋トレを読んだ</a>
	</h2>
	<div class="entry-content">
		
<h2 id="section">所感</h2>
<p>筋トレのモチベーションが上がったというよりは、なぜ筋トレをするのか考えることにつながった。<br />
自分はダイエットで成功体験があったり、筋トレは結構日常に組み込んでやってたときがあったけど、<br />
仕事で一気に忙しくなったときにその習慣がなくなってしまった。<br />
それをまたやる気にしてくれそうな雰囲気である。<br />
この本では、ボディデザインという概念を提唱している。<br />
ダイエットという引き算の発想から、筋トレをすることで自然に脂肪を減らすというものだ。<br />
この考えには多いに賛成だが、実際のところ好きなものを食べて筋肉バキバキとかはちょっと無理がある。<br />
食べ過ぎた次の日にはいっぱい筋トレして解消するみたいな考え方は確かに素晴らしいけどなぁ。<br />
あと自分を知るということについてもすごく参考にはなる。<br />
こと自分に至っては, 本当にお酒を飲むことがマイナスでしかない。<br />
お酒を飲むとすごく食欲が増してしまってドカ食いしてしまうし。<br />
なので無理せず減らすとかを考えるべきだと思う。  </p>

<p>五分でいいから筋トレを日常に組み込むというのはすごく励みになる。<br />
0じゃなく、多くなくてよいから1を繰り返せば 100 になるという発想。<br />
これはかなり良い発想かもしれない。</p>

<h2 id="section-1">自分にとっての筋トレの目的</h2>
<p>はっきり言って映画トランスポーターに出てくるジェイソンステイサムのようになりたい。<br />
すごく憧れる。俺の中で世界一かっこいいハゲ。<br />
自分のポリシーをはっきりともちつつ、「立っているだけで笑わせる」と言い切る笑いへの価値観。<br />
パーフェクトだ。  </p>

<p>この如何ともしがたい理想との乖離を埋めるべく、ジムで筋トレをしようと思う。  </p>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-13T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/leverage-memo/'>leverage_memo</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/13/life-log/">
		
			1月一周目</a>
	</h2>
	<div class="entry-content">
		
<h2 id="section">先週の振り返り</h2>
<p>先週は年明け一発目って感じだったが、モチベーションが自分の中で勝手に上がってきててよかった。<br />
目標に関する本を読みおえて、改めて立ててみると意外に行けそうな気がした。<br />
引き続き aws, chef などを触っているが、理解がかなり進んだように感じる。<br />
chef のレシピを一から20分くらいで作れるようになっていたのは成長を感じた。<br />
引き続きがんばる。<br />
Nexus7 はすごく良い。  </p>

<h2 id="section-1">冬休み振り返り</h2>
<p>今思い出したけど、北海道にかえった冬休み中にそこそこ vagrant を触っていたから理解が進んだんだった。<br />
rails tutorial を倒すってのはできなかったけど、現在もりもり進行中である。  </p>

<h2 id="section-2">雑言</h2>
<p>作ろうと思ってたやつあった<br />
<a href="https://github.com/mattn/vim-textobj-url">https://github.com/mattn/vim-textobj-url</a></p>

<h2 id="section-3">読書途中経過</h2>

<h3 id="section-4">進んだ</h3>
<ul>
  <li>マスタリングTCP/IP 入門第5版 6章まで読んだ</li>
  <li>オペレーティングシステム 6章まで読んだ</li>
  <li>プログラマの数学 3章まで読んだ</li>
</ul>

<h3 id="section-5">積んでる</h3>
<ul>
  <li>詳解UNIXプログラミング第5章まで読んだ</li>
  <li>パーフェクトルビー5章まで読んだ</li>
  <li>Webエンジニアのためのデータベース技術［実践］入門 7章まで読んだ</li>
  <li>ネットワークはなぜつながるのか?</li>
  <li>chef-solo 入門 #23 まで読んだ(どっかで手を動かしながらやる)</li>
</ul>

<h3 id="section-6">読み終えた</h3>
<ul>
  <li>ザ・コーチ 最高の自分に出会える「目標の達人ノート」</li>
  <li>読む筋トレ</li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-13T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>life</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/08/z_elasticsearch-ebs/">
		
			Elasticsearch_ebs</a>
	</h2>
	<div class="entry-content">
		
<h1 id="opsworks--elasticsearch-">opsworks と elasticsearch についてのメモ</h1>

<h2 id="elasticsearch--memo">elasticsearch についての memo</h2>
<ul>
  <li>クラスタリングした時に master-slave みたいになるのか？
    <ul>
      <li>ならない。すべてがマスタになる模様</li>
      <li>複数台立てておいて、片方落としておいて、立っている方にデータPUT して落としておいた方を立ててGETできる</li>
    </ul>
  </li>
  <li>elastic search s3 gateway はパフォーマンスの問題で deprecated になっている模様
    <ul>
      <li>なので EBS でやることになる。</li>
    </ul>
  </li>
  <li>chef の recipe を見ると、設定しておけば ebs を自動で作ってマウントまでしてくれる感じになっている
    <ul>
      <li>elasticsearch::ebs, elasticsearch::data のレシピを実行すれば良い感じ。
        <ul>
          <li>opsworks では, layers に elasticsearch::ebs, elasticsearch::data の順で登録すればおｋ</li>
          <li>README に書いてある通りに設定が必要。具体的には data_bags/elasticsearch/data.json と aws の認証周りの設定が必要</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>各アベイラビリティゾーンに分散しておいておいて、 internal loadbalancer に紐付ければ、片方が死んでも大丈夫</li>
  <li>災害時の復旧については、たぶん snapshot からの復旧に加えて、 index の再作成(upsert なAPI 叩きまくる) が必要</li>
  <li>discovery については aws-instance プラグインみたいなのがあって、api 叩いてリスト取得してきている。</li>
</ul>

<h2 id="elasticsearch--memo2">elasticsearch についての memo2</h2>
<ul>
  <li>elasticsearch って aws のサービス名かと思ってたけど、別にそういうわけじゃない</li>
</ul>

<h2 id="elasticsearch--memo3">elasticsearch についての memo3</h2>
<p>opsworks のレイヤーで、internal LB をひもづけることはできると思うけど、<br />
新しく作った elasticsearch node のインデックス作成とかしている時に紐づくとまずいので<br />
いったん手動でやるようにする。(たぶんELBの死活監視を工夫すればうまいこと行ける)  </p>

<h2 id="opsworks--chef-">opsworks の chef で役立つコマンド例</h2>

<div>
  <pre><code class="bash">## setup サイクルを retry
opsworks-cli-agent run_command setup

## custom.json を dump
opsworks-cli-agent get_json &gt; hoge.json

## ログをみる
opsworks-cli-agent show_log

## hoge.json を指定すれば、楽にもう一度ライフサイクルを指定できる
&quot;/opt/aws/opsworks/current/bin/chef-solo&quot; -j &quot;hoge.json&quot; -c &quot;/opt/aws/opsworks/current/conf/solo.rb&quot; -L &quot;/var/lib/aws/opsworks/chef/2014-01-09-05-28-54-01.log&quot; &gt; &quot;/var/lib/aws/opsworks/chef/2014-01-09-05-28-54-01.log.out&quot; 2&gt;&amp;1


### 役に立つディレクトリ

## opsworks の chef-solo が走るときにログが出たり、走るときの json が出たりする
/var/lib/aws/opsworks

## opsworks の chef-solo のクックブックとかがこのへんにある。
/opt/aws/opsworks</code></pre>
</div>

<h2 id="useiamprofile-">use_iam_profile がうまく行かない件</h2>
<p>gem の fog を使うところで use_iam_profile =&gt; true で渡しても全然うまく動かない問題があって、<br />
ライブラリのバグかもと思ったけどなんか違うっぽくて、時間がなかったので custom.json で大人しく accesskey とかを指定した。<br />
おそらく _request の時に credential の作成をしているんだけど、そこでミスっているんじゃないかなぁという予想。</p>

<h2 id="section">参考資料というか調べてく時に必要だったこと。</h2>
<ul>
  <li><a href="https://github.com/elasticsearch/elasticsearch/issues/2458">https://github.com/elasticsearch/elasticsearch/issues/2458</a></li>
  <li><a href="http://www.elasticsearch.org/tutorials/elasticsearch-on-ec2/">http://www.elasticsearch.org/tutorials/elasticsearch-on-ec2/</a></li>
  <li><a href="http://www.smokeymonkey.net/2013/10/elasticsearchcluster.html">http://www.smokeymonkey.net/2013/10/elasticsearchcluster.html</a></li>
  <li><a href="http://docs.aws.amazon.com/opsworks/latest/userguide/troubleshoot-debug-cli.html">http://docs.aws.amazon.com/opsworks/latest/userguide/troubleshoot-debug-cli.html</a></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-08T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/aws/'>aws</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/08/memo_the_coach/">
		
			ザ・コーチって本を読んだ</a>
	</h2>
	<div class="entry-content">
		
<h2 id="section">所感</h2>
<p>読み物形式の、ただの自己啓発本。<br />
自己啓発本の部類は7つの習慣とか読んどけば多分良くて<br />
ナポレオンヒルのやつとかも読んでたので<br />
内容はあんまり大差ない気がする。<br />
一応まとめたので書いておく。<br />
内容がものすごく自己啓発本だから実際に自分で文字を打つと<br />
すごい感じする。<br />
こういうのは読むとすごく大事だと思うんだけど、<br />
いざ毎日見る、みたいな仕組みづくりに挫折する場合がおおい。<br />
どこか生活の一部に組み込めばいいかもしれない。<br />
たとえばアラームとか。</p>

<h3 id="section-1">達人になるための3つの輪</h3>
<ul>
  <li>知識</li>
  <li>道具</li>
  <li>能力</li>
</ul>

<h3 id="section-2">ことばについて</h3>
<ul>
  <li>目標
    <ul>
      <li>目的を達成するためにもうけた目当て</li>
    </ul>
  </li>
  <li>目的
    <ul>
      <li>成し遂げようと目指す事柄</li>
    </ul>
  </li>
  <li>ゴール
    <ul>
      <li>目的のための最終的な目印</li>
    </ul>
  </li>
  <li>夢
    <ul>
      <li>将来自分が実現させたいと心の中に思い描いている願い</li>
    </ul>
  </li>
  <li>ビジョン
    <ul>
      <li>将来あるべき姿を描いたもの</li>
    </ul>
  </li>
</ul>

<h3 id="section-3">ドリームツリー</h3>

<blockquote><p>目    的<br />   |        |        |<br />  ゴール   ゴール    ゴール<br />|    |      |   |     |    |<br />目標 目標  目標 目標  目標  目標&#8230;</p></blockquote>

<h3 id="section-4">上記の5つの項目を設定することで良いこと</h3>
<ul>
  <li>共感者や協力者が現れる</li>
  <li>
    <p>同じ価値観を持った仲間が増える</p>
  </li>
  <li>目標に向かって努力することで人は成長する</li>
  <li>目標に向かって努力すれば、たとえそれがかなえられなかったとしても、人は精神的に強くなる</li>
  <li>誰かと同じ目標に向かってがんばることで、その後の人生の宝になる絆が生まれる</li>
  <li>目標を達成することで、達成感を味わえる</li>
  <li>ゴールを目指すことで、どんな人間に成長したかが重要</li>
</ul>

<h3 id="section-5">ベネフィットとは</h3>
<ul>
  <li>その道のりで、多くの共感者や協力者と出会い、さらに大きなことを成せる</li>
  <li>精神的に強くなり、更なる大きな決断の時に必要な勇気を手にする</li>
  <li>人間的に成長する</li>
  <li>人と人との絆が生まれ、人生の宝を得る</li>
  <li>人生が、ワクワク感やドキドキ感にあふれた、感情豊かで感動的なものになる</li>
  <li>知識, 選択力, 決断力, 集中力が増える</li>
  <li>知識・能力・道具が増えて価値ある人になる</li>
  <li>次の成功のための糧を手にする</li>
  <li>どん底にいるとき、詩人になり、魅力的な人物になる</li>
  <li>可能性の扉が開き、想像もしなかった未来の自分に会える</li>
  <li>精神的な視点が高くなり、人生で見る景色が変わる</li>
  <li>人生を存分に堪能できる</li>
</ul>

<h3 id="section-6">夢やゴールや目標の作成を妨げるブレーキとは</h3>
<ul>
  <li>方向を誤った目的</li>
  <li>他者からの批判や避難、成長期に味わった他者との比較等による学習性無力感</li>
  <li>夢やゴールや目標に対する無知</li>
  <li>結果による人格否定</li>
  <li>弱みを克服することばかり強いられる経験</li>
  <li>変化に対する恐れ</li>
  <li>選択と決断に対する恐れ</li>
</ul>

<h3 id="section-7">その他</h3>
<ul>
  <li>目的はゆるぎなく、ゴールを手にする方法は無限にあると尻、目標は柔軟に対応する</li>
  <li>ゴール達成を構成している要素を分解して、そこに期日と量と基準を盛り込んで旗(</li>
  <li>ゴールのための行動計画を目標とすると、ノルマかして意欲が下がる</li>
  <li>ゴールを設定したら、ゴールツリーを書いて、そのゴール達成を構成する知識と能力とツールに分解する</li>
  <li>行動を設計する</li>
  <li>目標には通過する状態を書く</li>
  <li>ゴールは目指すが、それだけにとらわれて自分を見失わない</li>
  <li>目標の主語を私にして、いつ、何が、どうなるという表現にする
    <ul>
      <li>何々するために、何何の状態になっている</li>
    </ul>
  </li>
  <li>目標はやるべきことではなく、ゴールまでの通過点や指標とする</li>
  <li>目標を設定したら、そのプロセスで「開かれた質問」を自分自身に問いかけて、思考力や解決力を鍛える
    <ul>
      <li>どうしたらうまくできるだろうか?</li>
      <li>効率的にするにはどうすればいいだろうか？</li>
      <li>今日この目標にたいして何をしただろうか?など。</li>
    </ul>
  </li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-08T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/leverage-memo/'>leverage_memo</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/12/27/z_chef-for-me/">
		
			Chef_for_me</a>
	</h2>
	<div class="entry-content">
		
<h1 id="chef-solo-vagrant-">chef-solo, vagrant に慣れるためにそれっぽいチュートリアルをやる</h1>

<h2 id="tutorial-">tutorial っぽいのがあったのでやってみる</h2>
<p><a href="http://vialstudios.com/guide-authoring-cookbooks.html">http://vialstudios.com/guide-authoring-cookbooks.html</a></p>

<h2 id="chef-chef-solo-">chef, chef-solo について</h2>
<p>ここが詳しい。
<a href="http://knowledge.sakura.ad.jp/tech/867/">http://knowledg.sakura.ad.jp/tech/867/</a></p>

<h2 id="start">start</h2>

<p>基本的に自分のメモなのであんまり参考にならないと思うけど残しておく。  </p>

<ul>
  <li>git install
    <ul>
      <li>すでにあったので省略</li>
    </ul>
  </li>
  <li>Install rbenv and ruby-build
    <ul>
      <li>すでにあったので省略</li>
    </ul>
  </li>
  <li>Install Ruby
    <ul>
      <li>すでにあったので省略</li>
    </ul>
  </li>
  <li>Install Berkshelf
    <ul>
      <li>すでにあったので省略</li>
    </ul>
  </li>
  <li>foodcritic を入れる。</li>
</ul>

<div>
  <pre><code class="bash">$ gem install foodcritic</code></pre>
</div>

<ul>
  <li>Install VirtualBox
    <ul>
      <li>すでにあったので省略</li>
    </ul>
  </li>
  <li>Install Vagrant
    <ul>
      <li>すでにあったので省略</li>
    </ul>
  </li>
  <li>Creating the Cookbook</li>
</ul>

<div>
  <pre><code class="bash">/Users/vimtaku/vm/myface% berks cookbook myface --foodcritic
      create  myface/files/default
      create  myface/templates/default
      create  myface/attributes
      create  myface/definitions
      create  myface/libraries
      create  myface/providers
      create  myface/recipes
      create  myface/resources
      create  myface/recipes/default.rb
      create  myface/metadata.rb
      create  myface/LICENSE
      create  myface/README.md
      create  myface/Berksfile
      create  myface/Thorfile
      create  myface/chefignore
      create  myface/.gitignore
         run  git init from &quot;./myface&quot;
      create  myface/Gemfile
      create  myface/Vagrantfile</code></pre>
</div>

<p>クックブックのスケルトンテンプレートを、 myface っていう名前で作成した。</p>

<ul>
  <li>Prepare your virtual environment
    <ul>
      <li>vendor/bundle にインストールする設定をやってなかったらやっておいたほうが良いかも
        <ul>
          <li><a href="http://qiita.com/toshiwo/items/4e7c82852f3e14bf5a1d">http://qiita.com/toshiwo/items/4e7c82852f3e14bf5a1d</a></li>
        </ul>
      </li>
      <li>bundle install</li>
    </ul>
  </li>
  <li>Starting your virtual machine
    <ul>
      <li>とりあえず言われたとおりにやってみろってことなのでやってみる</li>
    </ul>
  </li>
</ul>

<div>
  <pre><code class="bash">/Users/vimtaku/vm/myface/myface% bundle exec vagrant up
   ringing machine 'default' up with 'virtualbox' provider...
   [default] Box 'Berkshelf-CentOS-6.3-x86_64-minimal' was not found. Fetching box from specified URL for
   the provider 'virtualbox'. Note that if the URL does not have
   a box for this provider, you should interrupt Vagrant now and add
   the box yourself. Otherwise Vagrant will attempt to download the
   full box prior to discovering this error.
   Downloading or copying the box...
   Progress: 22% (Rate: 1045k/s, Estimated time remaining: 0:03:45)load: 1.56  cmd: curl 27613 waiting 0.84u 1.48s
   Progress: 50% (Rate: 1068k/s, Estimated time remaining: 0:02:03)load: 1.47  cmd: curl 27613 waiting 1.76u 3.18s
   Progress: 51% (Rate: 1147k/s, Estimated time remaining: 0:02:01)^U
   Progress: 85% (Rate: 1061k/s, Estimated time remaining: 0:00:38)load: 1.27  cmd: curl 27613 waiting 2.72u 4.99s
   Extracting box...te: 2251k/s, Estimated time remaining: 0:00:01)j
   Successfully added box 'Berkshelf-CentOS-6.3-x86_64-minimal' with provider 'virtualbox'!
   There are errors in the configuration of this machine. Please fix
   the following errors and try again:
   
   SSH:
   * The following settings shouldn't exist: max_tries, timeout</code></pre>
</div>

<ul>
  <li>エラー。 ssh
    <ul>
      <li>https://github.com/berkshelf/berkshelf/pull/856</li>
      <li>vagrant バージョンの違いによるものっぽい、削除して try</li>
    </ul>
  </li>
</ul>

<div>
  <pre><code class="bash">/Users/vimtaku/vm/myface/myface% bundle exec vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
[default] Importing base box 'Berkshelf-CentOS-6.3-x86_64-minimal'...
[default] Matching MAC address for NAT networking...
[default] Setting the name of the VM...
[default] Clearing any previously set forwarded ports...
[Berkshelf] This version of the Berkshelf plugin has not been fully tested on this version of Vagrant.
[Berkshelf] You should check for a newer version of vagrant-berkshelf.
[Berkshelf] If you encounter any errors with this version, please report them at https://github.com/RiotGames/vagrant-berkshelf/issues
[Berkshelf] You can also join the discussion in #berkshelf on Freenode.
[Berkshelf] Updating Vagrant's berkshelf: '/Users/vimtaku/.berkshelf/default/vagrant/berkshelf-20131227-27600-dzfcmn-default'
[Berkshelf] Using myface (0.1.0) from metadata
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 =&gt; 2222 (adapter 1)
[default] Booting VM...
[default] Waiting for machine to boot. This may take a few minutes...
[default] Machine booted and ready!
[default] Setting hostname...
[default] Configuring and enabling network interfaces...
[default] Mounting shared folders...
[default] -- /vagrant
[default] -- /tmp/vagrant-chef-1/chef-solo-1/cookbooks
[default] Running provisioner: chef_solo...
Generating chef JSON and uploading...
Running chef-solo...
[2013-12-27T09:05:00+00:00] INFO: *** Chef 10.14.2 ***
[2013-12-27T09:05:01+00:00] INFO: Setting the run_list to [&quot;recipe[myface::default]&quot;] from JSON
[2013-12-27T09:05:01+00:00] INFO: Run List is [recipe[myface::default]]
[2013-12-27T09:05:01+00:00] INFO: Run List expands to [myface::default]
[2013-12-27T09:05:01+00:00] INFO: Starting Chef Run for myface-berkshelf
[2013-12-27T09:05:01+00:00] INFO: Running start handlers
[2013-12-27T09:05:01+00:00] INFO: Start handlers complete.
[2013-12-27T09:05:01+00:00] INFO: Chef Run complete in 0.017946119 seconds
[2013-12-27T09:05:01+00:00] INFO: Running report handlers
[2013-12-27T09:05:01+00:00] INFO: Report handlers complete</code></pre>
</div>

<ul>
  <li>実行されているのは Vagrantfile の中に含まれていた run_list のところのリストだった</li>
  <li>cent os とか書いているところは自分の好きな感じで設定できるよとのこと</li>
  <li>
    <p>このへんは知ってるけど不安定とかになったら vagrant destroy とかで消せるよとのこと</p>
  </li>
  <li>Deploying with Artifact Deploy
    <ul>
      <li>myface っていうスーパークールな sns アプリ作ってやろうぜとのこと
        <ul>
          <li>Artifact Deploy は LWRP を deploy するためのもの!
            <ul>
              <li>LWRP はこちらを参照 -&gt; <a href="http://sssslide.com/speakerdeck.com/kentaro/chef-lwrp">http://sssslide.com/speakerdeck.com/kentaro/chef-lwrp</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>vim で編集. </li>
    </ul>
  </li>
</ul>
<div>
  <pre><code class="bash">/Users/vimtaku/vm/myface/myface% vim recipes/default.rb

artifact_deploy &quot;myface&quot; do
  version &quot;1.0.0&quot;
  artifact_location &quot;http://dl.dropbox.com/u/31081437/myface-1.0.0.tar.gz&quot;
  deploy_to &quot;/srv/myface&quot;
  owner &quot;myface&quot;
  group &quot;myface&quot;
  action :deploy
end</code></pre>
</div>

<ul>
  <li>provision command でもう一回 chef の provision を実行する。</li>
  <li>berkshelf vagrant plugin の 魔法によって依存関係を勝手に解決してくれる!</li>
</ul>

<div>
  <pre><code class="bash">[Berkshelf] This version of the Berkshelf plugin has not been fully tested on this version of Vagrant.
[Berkshelf] You should check for a newer version of vagrant-berkshelf.
[Berkshelf] If you encounter any errors with this version, please report them at https://github.com/RiotGames/vagrant-berkshelf/issues
[Berkshelf] You can also join the discussion in #berkshelf on Freenode.
[Berkshelf] Updating Vagrant's berkshelf: '/Users/vimtaku/.berkshelf/default/vagrant/berkshelf-20131227-27600-dzfcmn-default'
[Berkshelf] Using myface (0.1.0)
[default] Running provisioner: chef_solo...
Generating chef JSON and uploading...
Running chef-solo...
[2013-12-27T09:36:54+00:00] INFO: *** Chef 10.14.2 ***
[2013-12-27T09:36:54+00:00] INFO: Setting the run_list to [&quot;recipe[myface::default]&quot;] from JSON
[2013-12-27T09:36:54+00:00] INFO: Run List is [recipe[myface::default]]
[2013-12-27T09:36:54+00:00] INFO: Run List expands to [myface::default]
[2013-12-27T09:36:54+00:00] INFO: Starting Chef Run for myface-berkshelf
[2013-12-27T09:36:54+00:00] INFO: Running start handlers
[2013-12-27T09:36:54+00:00] INFO: Start handlers complete.

================================================================================
Recipe Compile Error in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/myface/recipes/default.rb
================================================================================

NameError
---------
Cannot find a resource for artifact_deploy on centos version 6.3

Cookbook Trace:
---------------
  /tmp/vagrant-chef-1/chef-solo-1/cookbooks/myface/recipes/default.rb:9:in `from_file'

Relevant File Content:
----------------------
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/myface/recipes/default.rb:

  1:  #
  2:  # Cookbook Name:: myface
  3:  # Recipe:: default
  4:  #
  5:  # Copyright (C) 2013 YOUR_NAME
  6:  # 
  7:  # All rights reserved - Do Not Redistribute
  8:  
  9:  artifact_deploy &quot;myface&quot; do

[2013-12-27T09:36:55+00:00] ERROR: Running exception handlers
[2013-12-27T09:36:55+00:00] ERROR: Exception handlers complete
[2013-12-27T09:36:55+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2013-12-27T09:36:55+00:00] FATAL: NameError: Cannot find a resource for artifact_deploy on centos version 6.3</code></pre>
</div>

<ul>
  <li>期待通りにエラッた
    <ul>
      <li>俺らは全然 artifact_deploy はいらない</li>
      <li>chef client が必要としているだけ</li>
      <li>俺らは LWRP が必要だっていうのを 俺らの cookbook に教えていないから教えてやる</li>
    </ul>
  </li>
  <li>Working with cookbook metadata
    <ul>
      <li>metadata.rb に教えてやる必要がある。
        <ul>
          <li>このファイルは結構初心者が見落としがちなんだけど結構大事なんだぜ</li>
          <li>metadata.rb は Rubygems で言う gemspec みたいなやつで依存関係を記述する奴で
            <ul>
              <li>name attribute で名前とか</li>
              <li>version attribute でバージョンとか</li>
              <li>depends 定義で 依存する cookbooks の記述とか</li>
              <li>conflict 定義で conflict する奴とか</li>
              <li>maintainer attribute で メンテナとか</li>
              <li>maintainer email とか</li>
              <li>license 情報 とか</li>
              <li>long_description を使って description とか
をかける!</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>全部の属性は必要ない</li>
      <li>けど attribute を空にするのはやめておけとのこと</li>
    </ul>
  </li>
  <li>
    <p>追記してbundle exec vagrant provision を実行</p>
  </li>
  <li>
    <p>ユーザ追記とかして</p>
  </li>
  <li>Using Berkshelf to gather dependencies</li>
  <li>どっから dependencies を解決しているのか</li>
  <li>metadata.rb をみていろいろやる</li>
  <li>
    <p>capistrano っぽいディレクトリ構成で deploy</p>
  </li>
  <li>Refactoring into attributes
    <ul>
      <li>attributes/default.rb に記入</li>
    </ul>
  </li>
</ul>
<div>
  <pre><code class="bash">default[:myface][:user] = &quot;myface&quot;
default[:myface][:group] = &quot;myface&quot;</code></pre>
</div>

<div>
  <pre><code class="bash">group &quot;#{node['myface']['group']}&quot;

user &quot;#{node['myface']['group']}&quot; do
  group &quot;#{node['myface']['group']}&quot;
  system true
  shell &quot;/bin/bash&quot;
end

artifact_deploy &quot;#{node['myface']['group']}&quot; do
  version &quot;1.0.0&quot;
  artifact_location &quot;/tmp/myface-1.0.0.tar.gz&quot;
  deploy_to &quot;/srv/myface&quot;
  owner &quot;#{node['myface']['user']}&quot;
  group &quot;#{node['myface']['group']}&quot;
  action :deploy
end</code></pre>
</div>

<ul>
  <li>artifact_location に /tmp 指定してるのは回線事情があって wget したやつをおいておいた.</li>
  <li>
    <p>うまく行った。書き方をちゃんとしないと validation で引っかかるので注意。</p>
  </li>
  <li>Idempotent recipes
    <ul>
      <li>レシピの冪とう性について書かれている</li>
      <li>not_if とかないと</li>
    </ul>
  </li>
  <li>Configuring the application server
    <ul>
      <li>depends “tomcat”, “~&gt; 0.11.0” を metadata.rb に追加する</li>
      <li>include_recipe “tomcat” を recipes/default.rb に追加する</li>
      <li>provision</li>
    </ul>
  </li>
  <li>include_recipe versus a Role with a run_list
    <ul>
      <li>スパイダーマンより、 大いなる力には、大いなる責任が伴う</li>
      <li>ポートフォワーディングの設定
        <ul>
          <li>config.vm.network :forwarded_port, guest: 8080, host: 9090</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Configuring Tomcat users
    <ul>
      <li>したがってやったらできた。</li>
      <li>/myapp はなぜか動かない</li>
      <li>まぁでもとりあえず受けれるところまで行ければおkなのでここまでとする</li>
    </ul>
  </li>
  <li>その下は
    <ul>
      <li>もっと attribute で可変にするところとか</li>
      <li>database の LWRP を使う例とかi
 が書いてある</li>
    </ul>
  </li>
  <li>これが便利</li>
</ul>

<div>
  <pre><code class="bash">require 'json'

file &quot;/tmp/dna.json&quot; do
  content JSON.pretty_generate(node)
end</code></pre>
</div>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-12-27T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/chef/'>chef</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/12/27/winter-vacation-todo/">
		
			Winter_vacation_todo</a>
	</h2>
	<div class="entry-content">
		<h2 id="section">冬休みにやること</h2>

<ul>
  <li>MUST
    <ul>
      <li>chef-solo, vagrant の自分用まとめ blog を書く</li>
      <li>rails tutorial 倒す</li>
    </ul>
  </li>
  <li>WANNAAAABEEEEEEEEEEE
    <ul>
      <li>多分今年も VAC ずっとやるんだろうから plugin 作る</li>
      <li>例の textobj</li>
      <li>例の operator</li>
      <li>ぼくのかんがえたさいきょうの メモ環境 を作る</li>
      <li>Unity ゲーム途中のやつ一区切りさす</li>
      <li>読書</li>
    </ul>
  </li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-12-27T00:00:00+09:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>life</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/3/" class="prev">Prev</a>
    
    
        <a href="/blog/page/5/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    vimtaku

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->




	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-30103097-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>